PREFIX ex: <http://www.w3.org/2022/example#>
PREFIX property: <http://www.dke-pr/property#>
PREFIX state: <http://www.dke-pr/aircraft/state#>
PREFIX response: <http://www.dke-pr/aircraft/response#>

SELECT ?state ?hasLatitude ?hasLongitude ?estimatedLatitude ?estimatedLongitude
FROM <http://localhost:3030/DynamicData/1673777435>
WHERE {
  ?state a ex:State .
  ?state property:hasLastPositionUpdate ?lastUpdate .
  ?state property:hasResponse ?response .
  ?state property:hasLatitude ?hasLatitude .
  ?state property:hasLongitude ?hasLongitude .
  ?state property:hasVelocity ?hasVelocity .
  ?state property:hasHeadingSin ?hasHeadingSin.
  ?state property:hasHeadingCos ?hasHeadingCos.
  FILTER (?lastUpdate < ?response)
  BIND ((?response - ?lastUpdate) * ?hasVelocity * ?hasHeadingSin / 6371008 * 180 / 3.14159 + ?hasLatitude as ?estimatedLatitude)
  BIND ((?response - ?lastUpdate) * ?hasVelocity * ?hasHeadingCos / 6371008 * 180 / 3.14159 + ?hasLongitude as ?estimatedLongitude)
}
