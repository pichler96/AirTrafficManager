ex:AvgAggregationEvent
    a sh:nodeShape;
    sh:targetClass ex:AvgAggregationEvent;
    sh:closed true;

    sh:rule[
        a sh:SPARQLRule;
        sh:prefixes ex:, property: ;
        sh:construct """
            PREFIX ex: <http://www.w3.org/2022/example#>
            PREFIX property: <http://www.dke-pr/property#>
            CONSTRUCT{
                ?avgAggregationEvent a ex:AvgAggregationEvent;
                property:timestamp ?timestamp ;
                property:owner ?owner ;
                property:avgCount ?avgCount ;
                property:type ?type .
            }
            WHERE {
                select (avg(?count) as ?avgCount)
                where {
                {SELECT (COUNT(?state) as ?count)
                    where {
                        {
                                GRAPH <http://localhost:3030/DynamicData/1674125711> {
                                    ?state a ex:State ;
                                    property:ofAircraft ?aircraft.
                                }
                            }
                            {
                                GRAPH <http://localhost:3030/StaticData> {
                                    ?aircraft a ex:Aircraft;
                                    property:hasOwner ?Owner.
                                    Filter(?Owner = #Owner#)
                                }
                            }
                    }
                  }
                }
            }
            """
    ];